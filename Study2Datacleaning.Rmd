---
title: "Study2 Data Cleaning"
author: "H.L. Glandorf"
date: '2022-11-02'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Psych Study Data Wrangling Part 1
This code file prepares the data for the next stage (data joining across waves). 

In this first stage, these are the objectives:
- correct column types (e.g., character to numeric)
- correct initial coding (e.g., match coding of items from online and offline data files)
- correct column names (e.g., to make them more intuitive and to correct naming that has come from downloading the file from Qualtrics and match online and offline files)
- filter for consent and remove full NA entries 
- join offline and online files into 1 for each wave (e.g., wave 1 file, wave 2 file, wave 3 file)

# Loading relevant libraries
```{r libraries}
library(tidyverse)
library(ggplot2)
library(psych)
library(readxl)
```

# Loading data (online and offline)
```{r load data}
# Online files
dat1 <- read_csv("s2data/PsychStudy_W1_Qualtrics.csv")
dat2 <- read_csv("s2data/PsychStudy_W2_Qualtrics.csv")
dat3 <- read_csv("s2data/PsychStudy_W3_Qualtrics.csv")

# Offline files
dat1dig <- read_excel("s2data/Wave1_digitalisation.xlsx", col_types = c("numeric", "numeric", "numeric", "numeric", "text", "text", "numeric", 
                                                                 "numeric", "text", "numeric", "numeric", "numeric", "text", "text", "numeric",
                                                                 "numeric", "numeric", "numeric","numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric","numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric","numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric","numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "text", "numeric", "text", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "text", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"))

dat2dig <- read_excel("s2data/Wave2_digitalisation.xlsx", col_types = c("numeric", "text", "numeric", "text", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric",
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric","numeric", "numeric", "numeric",
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric","numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric","numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric",
                                                                 "numeric", "numeric", "numeric", "numeric", "text", "numeric", 
                                                                 "text", "numeric", "numeric", "numeric","numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "text", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"))

dat3dig <- read_excel("s2data/Wave3_digitalisation.xlsx", col_types = c("numeric", "text", "numeric", "text", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric",
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric","numeric", "numeric", "numeric",
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric","numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric","numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric",
                                                                 "numeric", "numeric", "numeric", "numeric", "text", "numeric", 
                                                                 "text", "numeric", "numeric", "numeric","numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "text", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", 
                                                                 "numeric", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"))
# some NAs are being introduced here, because the column type is forced to be numeric, this is okay, since there ARE missing values. This will be taken care of later.
```
# Cleaning column names
The code here cleans up naming conventions that came from Qualtrics to make the column names more intuitive. It therefore only uses the files that have come from Qualtrics (online files)
```{r cleaning columns}
# Online files only
# Wave 1
dat1 <- dat1 %>% 
  rename(
    mental_disorder = Q4,
    pain_meds = Q5,
    consent1 = Q6, # 2=consent, 1=no consent
    consent2 = Q38, # 2=consent, 1=no consent
    email = Q35,
    institution = Q43,
    bio_sex = Q25,
    age = Q27,
    sport_type = Q28,
    injury = Q29,
    training_load = Q31,
    comp_years = Q32,
    medication = Q33,
    season = Q40,
    ABQ1 = QID1_1, ##Athlete Burnout Questionnaire
    ABQ2 = QID1_2,
    ABQ3 = QID1_3,
    ABQ4 = QID1_4,
    ABQ5 = QID1_5,
    ABQ6 = QID1_6,
    ABQ7 = QID1_7,
    ABQ8 = QID1_8,
    ABQ9 = QID1_9,
    ABQ10 = QID1_10,
    ABQ11 = QID1_11,
    ABQ12 = QID1_12,
    ABQ13 = QID1_13,
    ABQ14 = QID1_14,
    ABQ15 = QID1_15,
    PSym1 = Q41_1, ##Physical Symptoms Checklist
    PSym2 = Q41_2,
    PSym3 = Q41_3, 
    PSym4 = Q41_4,
    PSym5 = Q41_5,
    PSym6 = Q41_6,
    PSym7 = Q41_7,
    PSym8 = Q41_8,
    PSym9 = Q41_9,
    PSym10 = Q41_10,
    PSym11 = Q41_11,
    PSym12 = Q41_12,
    PSym13 = Q41_13,
    PSym14 = Q41_14,
    PSym15 = Q41_15,
    PSym16 = Q41_16,
    PSym17 = Q41_17,
    PSym18 = Q41_18,
    CESD1 = Q10_1, ##Depressive Symptoms CESD scale
    CESD2 = Q10_2,
    CESD3 = Q10_3,
    CESD4 = Q10_4,
    CESD5 = Q10_5,
    CESD6 = Q10_6,
    CESD7 = Q10_7,
    CESD8 = Q10_8,
    CESD9 = Q10_9,
    CESD10 = Q10_10,
    CESD11 = Q10_11,
    CESD12 = Q10_12,
    CESD13 = Q10_13,
    CESD14 = Q10_14,
    CESD15 = Q10_15,
    CESD16 = Q10_16,
    CESD17 = Q10_17,
    CESD18 = Q10_18,
    CESD19 = Q10_19,
    CESD20 = Q10_20,
    PSQI1 = Q16, ##Pittsburgh Sleep Index
    PSQI2 = Q17,
    PSQI3 = Q18,
    PSQI4 = Q19,
    PSQI5a = Q11_1,
    PSQI5b = Q11_2,
    PSQI5c = Q11_3,
    PSQI5d = Q11_4,
    PSQI5e = Q11_5,
    PSQI5f = Q11_6,
    PSQI5g = Q11_7,
    PSQI5h = Q11_8,
    PSQI5i = Q11_9,
    PSQI5j = Q11_10,
    PSQI5_p = Q12,
    PSQI6 = Q13_1,
    PSQI7 = Q13_2,
    PSQI8 = Q20_1,
    PSQI9 = Q21_1,
    PSQI10 = Q23,
    PSQI10a = Q24_1,
    PSQI10b = Q24_2,
    PSQI10c = Q24_3,
    PSQI10d = Q24_4,
    PSQI10e = Q24_5,
    URI1 = Q34_1, ##Upper Respiratory Tract Infections //cold severity
    URI2 = Q35_1, ##symptoms from here to URI8
    URI3 = Q35_2,
    URI4 = Q35_3,
    URI5 = Q35_4,
    URI6 = Q35_5,
    URI7 = Q35_6,
    URI8 = Q35_7,
    URI9 = Q36_1, ##think clearly
    URI10 = Q36_2, ##accomplish daily tasks
    URI11 = Q37, ##compared to last week
    LSS1 = Q42_1, ##Life Satisfaction Scale 
    LSS2 = Q42_2,
    LSS3 = Q42_3,
    LSS4 = Q42_4,
    LSS5 = Q42_5
  )

# wave 2
dat2 <- dat2 %>% 
  rename(
    email = Q35,
    training_load = Q31,
    medication = Q33,
    season = Q40,
    ABQ1 = QID1_1, ##Athlete Burnout Questionnaire
    ABQ2 = QID1_2,
    ABQ3 = QID1_3,
    ABQ4 = QID1_4,
    ABQ5 = QID1_5,
    ABQ6 = QID1_6,
    ABQ7 = QID1_7,
    ABQ8 = QID1_8,
    ABQ9 = QID1_9,
    ABQ10 = QID1_10,
    ABQ11 = QID1_11,
    ABQ12 = QID1_12,
    ABQ13 = QID1_13,
    ABQ14 = QID1_14,
    ABQ15 = QID1_15,
    PSym1 = Q41_1, ##Physical Symptoms Checklist
    PSym2 = Q41_2,
    PSym3 = Q41_3, 
    PSym4 = Q41_4,
    PSym5 = Q41_5,
    PSym6 = Q41_6,
    PSym7 = Q41_7,
    PSym8 = Q41_8,
    PSym9 = Q41_9,
    PSym10 = Q41_10,
    PSym11 = Q41_11,
    PSym12 = Q41_12,
    PSym13 = Q41_13,
    PSym14 = Q41_14,
    PSym15 = Q41_15,
    PSym16 = Q41_16,
    PSym17 = Q41_17,
    PSym18 = Q41_18,
    CESD1 = Q10_1, ##Depressive Symptoms CESD scale
    CESD2 = Q10_2,
    CESD3 = Q10_3,
    CESD4 = Q10_4,
    CESD5 = Q10_5,
    CESD6 = Q10_6,
    CESD7 = Q10_7,
    CESD8 = Q10_8,
    CESD9 = Q10_9,
    CESD10 = Q10_10,
    CESD11 = Q10_11,
    CESD12 = Q10_12,
    CESD13 = Q10_13,
    CESD14 = Q10_14,
    CESD15 = Q10_15,
    CESD16 = Q10_16,
    CESD17 = Q10_17,
    CESD18 = Q10_18,
    CESD19 = Q10_19,
    CESD20 = Q10_20,
    PSQI1 = Q16, ##Pittsburgh Sleep Index
    PSQI2 = Q17,
    PSQI3 = Q18,
    PSQI4 = Q19,
    PSQI5a = Q11_1,
    PSQI5b = Q11_2,
    PSQI5c = Q11_3,
    PSQI5d = Q11_4,
    PSQI5e = Q11_5,
    PSQI5f = Q11_6,
    PSQI5g = Q11_7,
    PSQI5h = Q11_8,
    PSQI5i = Q11_9,
    PSQI5j = Q11_10,
    PSQI5_p = Q12,
    PSQI6 = Q13_1,
    PSQI7 = Q13_2,
    PSQI8 = Q20_1,
    PSQI9 = Q21_1,
    PSQI10 = Q23,
    PSQI10a = Q24_1,
    PSQI10b = Q24_2,
    PSQI10c = Q24_3,
    PSQI10d = Q24_4,
    PSQI10e = Q24_5,
    URI1 = Q34_1, ##Upper Respiratory Tract Infections //cold severity
    URI2 = Q35_1, ##symptoms from here to URI8
    URI3 = Q35_2,
    URI4 = Q35_3,
    URI5 = Q35_4,
    URI6 = Q35_5,
    URI7 = Q35_6,
    URI8 = Q35_7,
    URI9 = Q36_1, ##think clearly
    URI10 = Q36_2, ##accomplish daily tasks
    URI11 = Q37, ##compared to last week
    LSS1 = Q42_1, ##Life Satisfaction Scale 
    LSS2 = Q42_2,
    LSS3 = Q42_3,
    LSS4 = Q42_4,
    LSS5 = Q42_5
  )

# wave 3
dat3 <- dat3 %>% 
  rename(
    email = Q35,
    training_load = Q31,
    medication = Q33,
    season = Q40,
    ABQ1 = QID1_1, ##Athlete Burnout Questionnaire
    ABQ2 = QID1_2,
    ABQ3 = QID1_3,
    ABQ4 = QID1_4,
    ABQ5 = QID1_5,
    ABQ6 = QID1_6,
    ABQ7 = QID1_7,
    ABQ8 = QID1_8,
    ABQ9 = QID1_9,
    ABQ10 = QID1_10,
    ABQ11 = QID1_11,
    ABQ12 = QID1_12,
    ABQ13 = QID1_13,
    ABQ14 = QID1_14,
    ABQ15 = QID1_15,
    PSym1 = Q41_1, ##Physical Symptoms Checklist
    PSym2 = Q41_2,
    PSym3 = Q41_3, 
    PSym4 = Q41_4,
    PSym5 = Q41_5,
    PSym6 = Q41_6,
    PSym7 = Q41_7,
    PSym8 = Q41_8,
    PSym9 = Q41_9,
    PSym10 = Q41_10,
    PSym11 = Q41_11,
    PSym12 = Q41_12,
    PSym13 = Q41_13,
    PSym14 = Q41_14,
    PSym15 = Q41_15,
    PSym16 = Q41_16,
    PSym17 = Q41_17,
    PSym18 = Q41_18,
    CESD1 = Q10_1, ##Depressive Symptoms CESD scale
    CESD2 = Q10_2,
    CESD3 = Q10_3,
    CESD4 = Q10_4,
    CESD5 = Q10_5,
    CESD6 = Q10_6,
    CESD7 = Q10_7,
    CESD8 = Q10_8,
    CESD9 = Q10_9,
    CESD10 = Q10_10,
    CESD11 = Q10_11,
    CESD12 = Q10_12,
    CESD13 = Q10_13,
    CESD14 = Q10_14,
    CESD15 = Q10_15,
    CESD16 = Q10_16,
    CESD17 = Q10_17,
    CESD18 = Q10_18,
    CESD19 = Q10_19,
    CESD20 = Q10_20,
    PSQI1 = Q16, ##Pittsburgh Sleep Index
    PSQI2 = Q17,
    PSQI3 = Q18,
    PSQI4 = Q19,
    PSQI5a = Q11_1,
    PSQI5b = Q11_2,
    PSQI5c = Q11_3,
    PSQI5d = Q11_4,
    PSQI5e = Q11_5,
    PSQI5f = Q11_6,
    PSQI5g = Q11_7,
    PSQI5h = Q11_8,
    PSQI5i = Q11_9,
    PSQI5j = Q11_10,
    PSQI5_p = Q12,
    PSQI6 = Q13_1,
    PSQI7 = Q13_2,
    PSQI8 = Q20_1,
    PSQI9 = Q21_1,
    PSQI10 = Q23,
    PSQI10a = Q24_1,
    PSQI10b = Q24_2,
    PSQI10c = Q24_3,
    PSQI10d = Q24_4,
    PSQI10e = Q24_5,
    URI1 = Q34_1, ##Upper Respiratory Tract Infections //cold severity
    URI2 = Q35_1, ##symptoms from here to URI8
    URI3 = Q35_2,
    URI4 = Q35_3,
    URI5 = Q35_4,
    URI6 = Q35_5,
    URI7 = Q35_6,
    URI8 = Q35_7,
    URI9 = Q36_1, ##think clearly
    URI10 = Q36_2, ##accomplish daily tasks
    URI11 = Q37, ##compared to last week
    LSS1 = Q42_1, ##Life Satisfaction Scale 
    LSS2 = Q42_2,
    LSS3 = Q42_3,
    LSS4 = Q42_4,
    LSS5 = Q42_5
  )
```

# Filtering 
Filtering out for those individuals who consented to taking part in the study AND being contacted for the remaining studies as well as individuals who withdrew or did not finish the study (cleaning up what Qualtrics did not clean). Emails have been anonymised code is just for show. Offlines files have already been cleaned for this at data entry, so only using online files here.
```{r cleaning data}
# Online files only
dat1 <- dat1 %>%
  filter(consent1==2, consent2==2) %>%
  filter(email != "ANONYMISED") %>%
  filter(!is.na(age))

dat2 <- dat2 %>%
  filter(Finished == 1)

dat3 <- dat3 %>%
  filter(Finished == 1)
```

# Recoding
Adjusting the coding for items that have been coded for data entry but need to be adjusted to ease coding in the next stage (e.g., for calculating total scores).
```{r recoding}
# Online files first
# wave 1
dat1 <- dat1 %>% mutate(PSQI1 = recode(PSQI1,
                                       `1`=21, #the PSQI is a sleep measure, 21 stands for 9pm, coding this way allows to use bed time and wake up time in calculations
                                       `2`=22,
                                       `3`=23,
                                       `4`=24,
                                       `5`=25,
                                       `6`=26),
                        PSQI2 = recode(PSQI2,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=2,
                                       `5`=3),
                        PSQI3 = recode(PSQI3,
                                       `1`=29, #the PSQI is a sleep measure, 29 stands for 5am, coding this way allows to use bed time and wake up time in calculations
                                       `2`=30,
                                       `3`=31,
                                       `4`=32,
                                       `5`=33,
                                       `6`=34),
                        PSQI4 = recode(PSQI4,
                                       `1`=3,
                                       `2`=2,
                                       `3`=1,
                                       `4`=0),
                        PSQI5a = recode(PSQI5a,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5b = recode(PSQI5b,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5c = recode(PSQI5c,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5d = recode(PSQI5d,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5e = recode(PSQI5e,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5f = recode(PSQI5f,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5g = recode(PSQI5g,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5h = recode(PSQI5h,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5i = recode(PSQI5i,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5j = recode(PSQI5j,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI6 = recode(PSQI6,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI7 = recode(PSQI7,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI8 = recode(PSQI8,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI9 = recode(PSQI9,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10 = recode(PSQI10,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10a = recode(PSQI10a,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10b = recode(PSQI10b,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10c = recode(PSQI10c,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10d = recode(PSQI10d,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10e = recode(PSQI10e,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        URI1 = recode(URI1, # moving the scale to match other published coding convention for the Upper respiratory symptom questionnaire
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI2 = recode(URI2,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI3 = recode(URI3,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI4 = recode(URI4,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI5 = recode(URI5,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI6 = recode(URI6,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI7 = recode(URI7,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI8 = recode(URI8,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI9 = recode(URI9,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI10 = recode(URI10,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7))
# wave 2
dat2 <- dat2 %>% mutate(PSQI1 = recode(PSQI1,
                                       `1`=21,
                                       `2`=22,
                                       `3`=23,
                                       `4`=24,
                                       `5`=25,
                                       `6`=26),
                        PSQI2 = recode(PSQI2,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=2,
                                       `5`=3),
                        PSQI3 = recode(PSQI3,
                                       `1`=29,
                                       `2`=30,
                                       `3`=31,
                                       `4`=32,
                                       `5`=33,
                                       `6`=34),
                        PSQI4 = recode(PSQI4,
                                       `1`=3,
                                       `2`=2,
                                       `3`=1,
                                       `4`=0),
                        PSQI5a = recode(PSQI5a,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5b = recode(PSQI5b,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5c = recode(PSQI5c,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5d = recode(PSQI5d,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5e = recode(PSQI5e,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5f = recode(PSQI5f,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5g = recode(PSQI5g,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5h = recode(PSQI5h,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5i = recode(PSQI5i,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5j = recode(PSQI5j,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI6 = recode(PSQI6,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI7 = recode(PSQI7,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI8 = recode(PSQI8,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI9 = recode(PSQI9,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10 = recode(PSQI10,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10a = recode(PSQI10a,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10b = recode(PSQI10b,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10c = recode(PSQI10c,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10d = recode(PSQI10d,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10e = recode(PSQI10e,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        URI1 = recode(URI1,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI2 = recode(URI2,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI3 = recode(URI3,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI4 = recode(URI4,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI5 = recode(URI5,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI6 = recode(URI6,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI7 = recode(URI7,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI8 = recode(URI8,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI9 = recode(URI9,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI10 = recode(URI10,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7))
# wave 3
dat3 <- dat3 %>% mutate(PSQI1 = recode(PSQI1,
                                       `1`=21,
                                       `2`=22,
                                       `3`=23,
                                       `4`=24,
                                       `5`=25,
                                       `6`=26),
                        PSQI2 = recode(PSQI2,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=2,
                                       `5`=3),
                        PSQI3 = recode(PSQI3,
                                       `1`=29,
                                       `2`=30,
                                       `3`=31,
                                       `4`=32,
                                       `5`=33,
                                       `6`=34),
                        PSQI4 = recode(PSQI4,
                                       `1`=3,
                                       `2`=2,
                                       `3`=1,
                                       `4`=0),
                        PSQI5a = recode(PSQI5a,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5b = recode(PSQI5b,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5c = recode(PSQI5c,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5d = recode(PSQI5d,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5e = recode(PSQI5e,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5f = recode(PSQI5f,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5g = recode(PSQI5g,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5h = recode(PSQI5h,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5i = recode(PSQI5i,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI5j = recode(PSQI5j,
                                        `1`=0,
                                        `2`=1,
                                        `3`=2,
                                        `4`=3),
                        PSQI6 = recode(PSQI6,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI7 = recode(PSQI7,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI8 = recode(PSQI8,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI9 = recode(PSQI9,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10 = recode(PSQI10,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10a = recode(PSQI10a,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10b = recode(PSQI10b,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10c = recode(PSQI10c,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10d = recode(PSQI10d,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        PSQI10e = recode(PSQI10e,
                                       `1`=0,
                                       `2`=1,
                                       `3`=2,
                                       `4`=3),
                        URI1 = recode(URI1,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI2 = recode(URI2,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI3 = recode(URI3,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI4 = recode(URI4,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI5 = recode(URI5,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI6 = recode(URI6,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI7 = recode(URI7,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI8 = recode(URI8,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI9 = recode(URI9,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7),
                        URI10 = recode(URI10,
                                      `1`=0,
                                      `2`=1,
                                      `3`=2,
                                      `4`=3,
                                      `5`=4,
                                      `6`=5,
                                      `7`=6,
                                      `8`=7))

# Offline files
# wave 1
dat1dig <- dat1dig %>% mutate(mental_disorder = recode(mental_disorder, # recoding answers to screening questions to match them to Qualtrics coding
                                       `0`=2,
                                       `1`=1),
                              pain_meds = recode(pain_meds,
                                                 `0`=2,
                                                 `1`=1),
                              PSQI1 = recode(PSQI1,
                                             `9pm` = 21, # doing the same with the time of bed here as above as this is also the PSQI
                                             `10pm` = 22,
                                             `11pm` = 23,
                                             `12pm` = 24,
                                             `1am` = 25,
                                             `2am` = 26),
                              PSQI3 = recode(PSQI3,
                                             `5am` = 29,
                                             `6am` = 30,
                                             `7am` = 31,
                                             `8am` = 32,
                                             `9am` = 33,
                                             `10am` = 34),
                              URI11 = recode(URI11, # recoding URI11 only as this was the only one not code right at data entry (this time represents its own dimension)
                                             `0` = 1,
                                             `1` = 2,
                                             `2` = 3,
                                             `3` = 4,
                                             `4` = 5,
                                             `5` = 6,
                                             `6` = 7))

# wave 2
dat2dig <- dat2dig %>% mutate(PSQI1 = recode(PSQI1,
                                             `9pm` = 21, # doing the same with the time of bed here as above as this is also the PSQI
                                             `10pm` = 22,
                                             `11pm` = 23,
                                             `12pm` = 24,
                                             `1am` = 25,
                                             `2am` = 26),
                              PSQI3 = recode(PSQI3,
                                             `5am` = 29,
                                             `6am` = 30,
                                             `7am` = 31,
                                             `8am` = 32,
                                             `9am` = 33,
                                             `10am` = 34),
                              URI11 = recode(URI11,
                                             `0` = 1,
                                             `1` = 2,
                                             `2` = 3,
                                             `3` = 4,
                                             `4` = 5,
                                             `5` = 6,
                                             `6` = 7))
# wave 3
dat3dig <- dat3dig %>% mutate(PSQI1 = recode(PSQI1,
                                             `9pm` = 21, # doing the same with the time of bed here as above as this is also the PSQI
                                             `10pm` = 22,
                                             `11pm` = 23,
                                             `12pm` = 24,
                                             `1am` = 25,
                                             `2am` = 26),
                              PSQI3 = recode(PSQI3,
                                             `5am` = 29,
                                             `6am` = 30,
                                             `7am` = 31,
                                             `8am` = 32,
                                             `9am` = 33,
                                             `10am` = 34),
                              URI11 = recode(URI11,
                                             `0` = 1,
                                             `1` = 2,
                                             `2` = 3,
                                             `3` = 4,
                                             `4` = 5,
                                             `5` = 6,
                                             `6` = 7))
```

# Combine online and offline files
Online and Digitalised files are now matched in coding of items and name of columns and can be combined.
```{r write out data in csv}
# Combine online and offline files of each wave
wave1 <- rbind(dat1, dat1dig)
wave2 <- rbind(dat2, dat2dig)
wave3 <- rbind(dat3, dat3dig)

# write files into csv files
#write.csv(wave1, file = "s2data/S3_W1_clean.csv")
#write.csv(wave2, file = "s2data/S3_W2_clean.csv")
#write.csv(wave3, file = "s2data/S3_W3_clean.csv")
```